<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>クリエイター詳細 - もつ楽公式サイト</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="CSS/style.css">
    
    <link rel="icon" href="my-favicon/favicon.ico">
    <link rel="apple-touch-icon" href="image/apple-touch-icon.png">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <header class="site-header">
        <div class="container header-inner">
            <div class="site-branding">
                <a href="index.html" class="site-logo"><img src="image/headerlogo.jpg" alt="もつ楽公式サイト ロゴ"></a>
                <div>
                    <h1 class="site-title">もつ楽公式サイト</h1>
                    <p class="site-description">(Ver.0.7.0-Beta+GhP)</p>
                </div>
            </div>
            <nav class="main-navigation">
                <button class="menu-toggle">メニュー▼</button>
                <div class="menu-container">
                    <a href="products.html">制作物</a>
                    <a href="update.html">更新履歴</a>
                    <a href="Profile-server-manager.html">サイト管理者プロフィール</a>
                    <a href="Server-info.html">このサイトについて</a>
                </div>
            </nav>
        </div>
    </header>

<main class="site-content">
        <div class="profile-container">
            <img id="p-image" src="" alt="" class="profile-img-large">
            <h1 id="p-name">読み込み中...</h1>
            <p id="p-position" style="font-weight:bold; color:#666;"></p>
            <hr>
            <div id="p-detail" style="line-height: 1.8;"></div>
            <div id="achievements-section"></div>

            <div id="gallery-section"></div>

            <div class="button-container" style="margin-top: 30px;">
                <a href="creators.html" class="btn">← クリエイター一覧に戻る</a>
            </div>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <div class="footer-links">
                <a href="https://x1288664.github.io/zunda0924-motsuraku.github.io/">トップページ</a>
                <a href="products.html">制作物</a>
                <a href="Server-info.html">サイトについて</a>
            </div>
            <div class="footer-social-icons">
                <a href="https://www.youtube.com/@studiomarx" target="_blank" rel="noopener noreferrer"><img src="image/YT-Logo.png" alt="YouTube"></a>
                <a href="https://x.gd/P1zVi" target="_blank" rel="noopener noreferrer"><img src="image/LINE.png" alt="LINE"></a>
            </div>
            <p>&copy; 2025 STUDIO MARX</p>
        </div>
    </footer>

    <script src="JavaScript/script.js"></script>
    <script src="JavaScript/creators.js"></script>
    
    <script>
        const params = new URLSearchParams(window.location.search);
        const targetId = params.get('id');
        const creator = creatorsData.find(c => c.id === targetId);

        if (creator) {
            document.title = creator.name + " | クリエイター詳細";
            document.getElementById('p-image').src = creator.image;
            document.getElementById('p-image').alt = creator.name;
            document.getElementById('p-name').textContent = creator.name;
            document.getElementById('p-position').textContent = creator.position;
            document.getElementById('p-detail').innerHTML = creator.detail;

// --- 功績セクション ---
            const achSection = document.getElementById('achievements-section');
            
            if (creator.achievements && creator.achievements.length > 0) {
                let itemsHTML = '';
                
                creator.achievements.forEach(item => {
                    let contentHTML = '';

                    // タイプによって表示内容を分岐
if (item.type === 'youtube') {
                        // YouTubeの場合
                        contentHTML = `
                            <div class="grid-item-content">
                                <h3 style="margin-top:0;">${item.title}</h3>
                                ${item.desc ? `<p style="margin-bottom:10px;">${item.desc}</p>` : ''}
                            </div>
                            <div class="youtube-container">
                                <iframe src="${item.link}" title="${item.title}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                            </div>
                        `;
                        itemsHTML += `<div class="grid-item card">${contentHTML}</div>`;

                    } else if (item.type === 'iframe') {
                        // その他の埋め込みの場合 (item.url → item.link に修正)
                        contentHTML = `
                            <div style="padding: 15px;">
                                <h3 style="margin-top:0;">${item.title}</h3>
                                ${item.desc ? `<p>${item.desc}</p>` : ''}
                                <iframe src="${item.link}" class="embed-iframe" loading="lazy"></iframe>
                            </div>
                        `;
                        itemsHTML += `<div class="grid-item card">${contentHTML}</div>`;

                    } else {
                        // 通常のリンクの場合 (item.url → item.link に修正)
                        const tag = item.link ? 'a' : 'div';
                        const hrefAttr = item.link ? `href="${item.link}"` : '';
                        
                        contentHTML = `
                            <div class="grid-item-content" style="padding:15px;">
                                <h3 style="margin-top:0;">${item.title}</h3>
                                ${item.desc ? `<p style="margin-bottom:0; font-size:0.9em; color:#666;">${item.desc}</p>` : ''}
                            </div>
                        `;
                        itemsHTML += `<${tag} ${hrefAttr} class="grid-item card" style="display:block; text-decoration:none; color:inherit; transition:transform 0.2s;">${contentHTML}</${tag}>`;
                    }
                });

                achSection.innerHTML = `
                    <section style="margin-top: 40px;">
                        <h2 style="font-size:1.5rem; border-bottom:2px solid #007bff; padding-bottom:10px; margin-bottom:20px;">制作実績・功績</h2>
                        <div class="grid-container" style="display:grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap:20px;">
                            ${itemsHTML}
                        </div>
                    </section>
                `;
            }

            // --- ▼▼▼ イラストギャラリーの生成処理（ここを追加！） ▼▼▼ ---
            const gallerySection = document.getElementById('gallery-section');
            
            if (creator.gallery && creator.gallery.length > 0) {
                let galleryHTML = '<div class="illust-grid">';
                
                creator.gallery.forEach(art => {
                    galleryHTML += `
                        <a href="${art.full}" class="illust-item" data-caption="${art.caption || ''}">
                            <img src="${art.thumb}" alt="${art.caption || 'イラスト'}">
                        </a>
                    `;
                });
                galleryHTML += '</div>';

                gallerySection.innerHTML = `
                    <section class="card" style="margin-top: 30px;">
                        <h2>イラストギャラリー</h2>
                        ${galleryHTML}
                    </section>
                `;
            }
        } else {
            document.querySelector('main .container').innerHTML = '<section class="card" style="text-align:center; padding:40px;"><h2>該当するクリエイターが見つかりません。</h2><p><a href="creators.html" class="btn">一覧に戻る</a></p></section>';
        }
    </script>
</body>
</html>