<!DOCTYPE html>
<html lang="ja">
<head>
<meta name="google-site-verification" content="XEIRa7GVkI_zzep9flSPtWaKfy9fZKLNgTsL4W0kAmE" />
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Y01B511XXC"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Y01B511XXC');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼è©³ç´° - ã‚‚ã¤æ¥½å…¬å¼ã‚µã‚¤ãƒˆ</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="CSS/style.css">
    
    <link rel="icon" href="my-favicon/favicon.ico">
    <link rel="apple-touch-icon" href="image/apple-touch-icon.png">

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <style>
        /* === ç®¡ç†éƒ¨ãƒ¡ãƒ³ãƒãƒ¼ãƒšãƒ¼ã‚¸(profile.html)ã¨åŒã˜ã‚¹ã‚¿ã‚¤ãƒ« === */
        .profile-container { 
            max-width: 800px; 
            margin: 50px auto; 
            padding: 20px; 
            text-align: center; 
        }
        
        /* ç”»åƒï¼šä¸­å¤®ã«é…ç½®ã—ã€é©åˆ‡ãªã‚µã‚¤ã‚ºã«èª¿æ•´ */
        .profile-img-large { 
            width: auto;       
            max-width: 100%;   
            max-height: 400px; 
            height: auto;
            border-radius: 10px; 
            display: block;    
            margin: 0 auto 30px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border: 1px solid #fff;
        }

        /* åå‰ */
        #p-name {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        /* å½¹è· */
        #p-position {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 30px;
            font-weight: bold;
        }

        /* è©³ç´°æ–‡ã¯èª­ã¿ã‚„ã™ã„ã‚ˆã†ã«å·¦æƒãˆ */
        #p-detail {
            text-align: left;
            line-height: 1.8;
            display: inline-block;
            width: 100%;
        }

        .back-btn { 
            display: inline-block; 
            margin-top: 30px; 
            color: #007bff; 
            text-decoration: none; 
            font-weight: bold;
        }
        .back-btn:hover {
            text-decoration: underline;
        }
        
        /* ã‚®ãƒ£ãƒ©ãƒªãƒ¼ç”¨ã‚°ãƒªãƒƒãƒ‰èª¿æ•´ */
        .illust-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
    </style>
 </head>
<body>
    <header class="site-header">
        <div class="container header-inner">
            <div class="site-branding">
                <a href="index.html" class="site-logo"><img src="image/headerlogo.jpg" alt="ã‚‚ã¤æ¥½å…¬å¼ã‚µã‚¤ãƒˆ ãƒ­ã‚´"></a>
                <div>
                    <h1 class="site-title">ã‚‚ã¤æ¥½å…¬å¼ã‚µã‚¤ãƒˆ</h1>
                    <p class="site-description">(Ver.0.9.1-Beta+GhP)</p>
                </div>
            </div>
            <div style="display: flex; align-items: center; gap: 10px;">
                <button id="theme-toggle" class="theme-btn" aria-label="ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿">ğŸŒ™</button>
                <nav class="main-navigation">
                    <button class="menu-toggle">ãƒ¡ãƒ‹ãƒ¥ãƒ¼â–¼</button>
                    <div class="menu-container">
                        <a href="creators.html">ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼</a>
                        <a href="products.html">ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ¡ãƒ‡ã‚£ã‚¢</a>
                        <a href="update.html">æ›´æ–°å±¥æ­´</a>
                        <a href="members.html">ç®¡ç†ãƒ¡ãƒ³ãƒãƒ¼</a>
                        <a href="server.html">ã“ã®ã‚µã‚¤ãƒˆã«ã¤ã„ã¦</a>
                    </div>
                </nav>
            </div>
        </div>
    </header>

    <main class="site-content">
        <div class="profile-container card">
            <img id="p-image" src="" alt="" class="profile-img-large">
            <h1 id="p-name">èª­ã¿è¾¼ã¿ä¸­...</h1>
            <p id="p-position"></p>
            
            <hr style="margin: 30px 0; opacity: 0.5;">
            
            <div id="p-detail"></div>

            <div id="achievements-section"></div>

            <div id="gallery-section"></div>

            <div class="button-container" style="margin-top: 40px;">
                <a href="creators.html" class="btn btn-primary">â† ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ä¸€è¦§ã«æˆ»ã‚‹</a>
            </div>
        </div>
    </main>

<footer class="site-footer">
        <div class="container">
            <div class="footer-links">
                <a href="https://x1288664.github.io/zunda0924-motsuraku.github.io/">ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸</a>
                <a href="products.html">åˆ¶ä½œç‰©</a>
                <a href="server.html">ã‚µã‚¤ãƒˆã«ã¤ã„ã¦</a>
                <a href="privacy.html">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>
            </div>
            
            <div class="footer-social-icons">
                <a href="https://www.youtube.com/@studiomarx" target="_blank" rel="noopener noreferrer">
                    <img src="image/YT-Logo.png" alt="YouTube">
                </a>
                <a href="https://x.gd/P1zVi" target="_blank" rel="noopener noreferrer">
                    <img src="image/LINE.png" alt="LINE">
                </a>
            </div>

            <div style="margin-bottom: 10px;">
                <a href="http://www.sitemapxml.jp/" target="_blank" class="sitemap-icon">
                    <img src="image/sitemapxml.png" width="117" height="14" alt="sitemap">
                </a>
            </div>

            <p>&copy; 2025 STUDIO MARX</p>
        </div>
    </footer>

    <script src="JavaScript/script.js"></script>
    
<script>
const supabaseUrl = 'https://lfgrtbofqgrkeidjmjgc.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxmZ3J0Ym9mcWdya2VpZGptamdjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYxNDM3MTIsImV4cCI6MjA4MTcxOTcxMn0.mKZMkVRfpZFuk7W2nI9g1EX8pDk-THtVkfPVsL-5txM';
        const _client = supabase.createClient(supabaseUrl, supabaseKey);

        function logDetailStatus(status, detail) {
            console.log(`${status} ...${detail}`);
        }

        document.addEventListener('DOMContentLoaded', async () => {
            console.log('\n=== ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼è©³ç´°DBç¢ºèª ===');
            
            const params = new URLSearchParams(window.location.search);
            const targetId = params.get('id');
            const container = document.querySelector('.profile-container');
            const nameEl = document.getElementById('p-name');

            if (!targetId) {
                nameEl.textContent = "ã‚¨ãƒ©ãƒ¼";
                document.getElementById('p-detail').innerHTML = '<p>IDãŒæŒ‡å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>';
                return;
            }

            // ãƒ‡ãƒ¼ã‚¿å–å¾—
            const { data: creator, error } = await _client
                .from('Creators')
                .select(`
                    *,
                    Creator_Achievements(*),
                    Creator_Gallery(*)
                `)
                .eq('id', targetId)
                .single();

            if (error || !creator) {
                console.error(error);
                nameEl.textContent = "è©²å½“ãªã—";
                document.getElementById('p-detail').innerHTML = '<p>ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>';
                return;
            }

            logDetailStatus('ãƒ‡ãƒ¼ã‚¿å–å¾—', `æˆåŠŸ (${creator.name}) âœ…`);
            
            // --- 1. åŸºæœ¬æƒ…å ± ---
            document.title = creator.name + " | ã‚¯ãƒªã‚¨ã‚¤ã‚¿ãƒ¼ç´¹ä»‹";
            
            const imgEl = document.getElementById('p-image');
            imgEl.src = creator.image ? creator.image : 'image/members/default.webp';
            imgEl.alt = creator.name;

            nameEl.textContent = creator.name;
            document.getElementById('p-position').textContent = creator.position;
            document.getElementById('p-detail').innerHTML = creator.detail || 'è©³ç´°æƒ…å ±ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚';

// --- 2. åŠŸç¸¾ãƒªã‚¹ãƒˆ (YouTubeã¨ãƒ„ãƒ¼ãƒ«ã‚’åŒºåˆ¥ã—ã¦è¡¨ç¤º) ---
            const achSection = document.getElementById('achievements-section');
            achSection.innerHTML = '';
            
            const achievements = (creator.Creator_Achievements || []).sort((a, b) => a.sort_order - b.sort_order);

            if (achievements.length > 0) {
                let itemsHTML = '';
                
                achievements.forEach(item => {
                    const descText = item.description || '';
                    
                    if (item.type === 'youtube') {
                        // ã€ãƒ‘ã‚¿ãƒ¼ãƒ³Aã€‘YouTubeå‹•ç”» (16:9ã®æ¯”ç‡ã€ã‚°ãƒªãƒƒãƒ‰é…ç½®)
                        itemsHTML += `
                            <div class="grid-item card" style="display:block; padding:0; margin-bottom:0; overflow:hidden;">
                                <div style="padding:15px; border-bottom:1px solid #eee;">
                                    <h3 style="margin:0; font-size:1.1rem;">${item.title}</h3>
                                    ${descText ? `<p style="margin:0.5em 0 0; font-size:0.9em; color:#666;">${descText}</p>` : ''}
                                </div>
                                <div style="position:relative; width:100%; padding-bottom:56.25%; height:0; background:#000;">
                                    <iframe src="${item.link}" style="position:absolute; top:0; left:0; width:100%; height:100%; border:none;" allowfullscreen loading="lazy"></iframe>
                                </div>
                            </div>
                        `;
                    } else if (item.type === 'iframe') {
                        // ã€ãƒ‘ã‚¿ãƒ¼ãƒ³Bã€‘Webãƒ„ãƒ¼ãƒ«/Hugging Face (å…¨å¹…è¡¨ç¤ºã€é«˜ã•å›ºå®š)
                        // style="grid-column: 1 / -1;" ã§æ¨ªå¹…ã„ã£ã±ã„ã«åºƒã’ã¾ã™
                        itemsHTML += `
                            <div class="grid-item card" style="display:block; padding:0; margin-bottom:0; overflow:hidden; grid-column: 1 / -1;">
                                <div style="padding:15px; border-bottom:1px solid #eee;">
                                    <h3 style="margin:0; font-size:1.1rem;">${item.title} ğŸ› ï¸</h3>
                                    ${descText ? `<p style="margin:0.5em 0 0; font-size:0.9em; color:#666;">${descText}</p>` : ''}
                                </div>
                                <div style="width:100%; height:600px; background:#f9f9f9;">
                                    <iframe src="${item.link}" style="width:100%; height:100%; border:none;" loading="lazy"></iframe>
                                </div>
                            </div>
                        `;
                    } else {
                        // ã€ãƒ‘ã‚¿ãƒ¼ãƒ³Cã€‘é€šå¸¸ã®ãƒªãƒ³ã‚¯ã‚«ãƒ¼ãƒ‰
                        const tag = item.link ? 'a' : 'div';
                        const hrefAttr = item.link ? `href="${item.link}" target="_blank"` : '';
                        
                        itemsHTML += `
                            <${tag} ${hrefAttr} class="grid-item card" style="display:block; text-decoration:none; color:inherit; padding:0; margin-bottom:0;">
                                <div class="grid-item-content" style="padding:15px; text-align:left;">
                                    <h3 style="margin-top:0; font-size:1.1rem;">${item.title} ${item.link ? 'ğŸ”—' : ''}</h3>
                                    ${descText ? `<p style="margin:0.5em 0 0; font-size:0.9em; color:#666;">${descText}</p>` : ''}
                                </div>
                            </${tag}>
                        `;
                    }
                });

                achSection.innerHTML = `
                    <section style="margin-top: 50px; text-align:left;">
                        <h2 style="font-size:1.5rem; border-bottom:2px solid #007bff; padding-bottom:10px; margin-bottom:20px;">
                            ä¸»ãªæ´»å‹•ãƒ»åŠŸç¸¾
                        </h2>
                        <div class="grid-container" style="display:grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap:20px;">
                            ${itemsHTML}
                        </div>
                    </section>
                `;
            }

            // --- 3. ã‚®ãƒ£ãƒ©ãƒªãƒ¼ ---
            const gallSection = document.getElementById('gallery-section');
            gallSection.innerHTML = '';

            const gallery = (creator.Creator_Gallery || []).sort((a, b) => a.sort_order - b.sort_order);

            if (gallery.length > 0) {
                let galleryHTML = '';
                gallery.forEach(art => {
                    galleryHTML += `
                        <a href="${art.full_url}" class="illust-item" title="${art.caption || ''}" style="display:block; border-radius:8px; overflow:hidden; box-shadow:0 2px 5px rgba(0,0,0,0.1);">
                            <img src="${art.thumb_url}" alt="${art.caption || 'Artwork'}" style="width:100%; height:100%; object-fit:cover; display:block;">
                        </a>
                    `;
                });

                gallSection.innerHTML = `
                    <section style="margin-top: 50px; text-align:left;">
                        <h2 style="font-size:1.5rem; border-bottom:2px solid #007bff; padding-bottom:10px; margin-bottom:20px;">
                            ã‚®ãƒ£ãƒ©ãƒªãƒ¼
                        </h2>
                        <div class="illust-grid">
                            ${galleryHTML}
                        </div>
                    </section>
                `;
            }

            // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            setTimeout(() => {
                const newCards = container.querySelectorAll('.card');
                newCards.forEach(c => c.classList.add('is-visible'));
            }, 100);
        });
</script>
</body>
</html>